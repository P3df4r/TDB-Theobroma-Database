"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const configuration_1 = require("@jbrowse/core/configuration");
const mobx_state_tree_1 = require("mobx-state-tree");
function stateModelFactory(pluginManager, configSchema) {
    const WigglePlugin = pluginManager.getPlugin('WigglePlugin');
    const { linearWiggleDisplayModelFactory } = WigglePlugin.exports;
    return mobx_state_tree_1.types
        .compose('LinearGCContentDisplay', linearWiggleDisplayModelFactory(pluginManager, configSchema), mobx_state_tree_1.types.model({
        type: mobx_state_tree_1.types.literal('LinearGCContentDisplay'),
    }))
        .views(self => {
        const { renderProps: superRenderProps } = self;
        return {
            renderProps() {
                const sequenceAdapter = (0, configuration_1.getConf)(self.parentTrack, 'adapter');
                return {
                    ...superRenderProps(),
                    adapterConfig: {
                        type: 'GCContentAdapter',
                        sequenceAdapter,
                    },
                };
            },
        };
    });
}
exports.default = stateModelFactory;
//# sourceMappingURL=stateModel.js.map