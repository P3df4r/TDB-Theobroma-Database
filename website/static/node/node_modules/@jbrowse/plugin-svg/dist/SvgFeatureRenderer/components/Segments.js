"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const react_1 = __importDefault(require("react"));
const configuration_1 = require("@jbrowse/core/configuration");
const mobx_react_1 = require("mobx-react");
const Arrow_1 = __importDefault(require("./Arrow"));
function Segments(props) {
    const { feature, featureLayout, selected, config, 
    // some subfeatures may be computed e.g. makeUTRs,
    // so these are passed as a prop, or feature.get('subfeatures') by default
    subfeatures = feature.get('subfeatures'), } = props;
    const color2 = (0, configuration_1.readConfObject)(config, 'color2', { feature });
    const { left = 0, top = 0, width = 0, height = 0 } = featureLayout.absolute;
    const y = top + height / 2;
    return (react_1.default.createElement(react_1.default.Fragment, null,
        react_1.default.createElement("line", { "data-testid": feature.id(), x1: left, y1: y, y2: y, x2: left + width, stroke: color2 }), subfeatures === null || subfeatures === void 0 ? void 0 :
        subfeatures.map(subfeature => {
            const subfeatureId = String(subfeature.id());
            const subfeatureLayout = featureLayout.getSubRecord(subfeatureId);
            // This subfeature got filtered out
            if (!subfeatureLayout) {
                return null;
            }
            const { GlyphComponent } = subfeatureLayout.data || {};
            return (react_1.default.createElement(GlyphComponent, { key: `glyph-${subfeatureId}`, ...props, feature: subfeature, topLevel: false, featureLayout: subfeatureLayout, selected: selected }));
        }),
        react_1.default.createElement(Arrow_1.default, { ...props })));
}
exports.default = (0, mobx_react_1.observer)(Segments);
//# sourceMappingURL=Segments.js.map