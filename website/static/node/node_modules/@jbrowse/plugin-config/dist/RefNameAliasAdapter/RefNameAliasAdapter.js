"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const BaseAdapter_1 = require("@jbrowse/core/data_adapters/BaseAdapter");
const io_1 = require("@jbrowse/core/util/io");
const configuration_1 = require("@jbrowse/core/configuration");
class RefNameAliasAdapter extends BaseAdapter_1.BaseAdapter {
    async getRefNameAliases() {
        const loc = (0, configuration_1.readConfObject)(this.config, 'location');
        if (loc.uri === '' || loc.uri === '/path/to/my/aliases.txt') {
            return [];
        }
        const results = await (0, io_1.openLocation)(loc).readFile('utf8');
        const refColumn = (0, configuration_1.readConfObject)(this.config, 'refNameColumn');
        return results
            .trim()
            .split(/\n|\r\n|\r/)
            .filter(f => !!f && !f.startsWith('#'))
            .map(row => {
            const aliases = row.split('\t');
            const [refName] = aliases.splice(refColumn, 1);
            return { refName, aliases: aliases.filter(f => !!f.trim()) };
        });
    }
    async freeResources() { }
}
exports.default = RefNameAliasAdapter;
//# sourceMappingURL=RefNameAliasAdapter.js.map